(this["webpackJsonpunique-homepage"]=this["webpackJsonpunique-homepage"]||[]).push([[17],{361:function(e,t,a){"use strict";var n=a(23),r=a(24),s=a(26),i=a(25),l=a(27),o=a(0),c=a.n(o),m=a(325),u=a.n(m),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},a.isDark=function(){if(null===a.props.bg||void 0===a.props.bg)return null;var e=a.hexToRgb(a.props.bg).r,t=a.hexToRgb(a.props.bg).g,n=a.hexToRgb(a.props.bg).b,r=/rgb\((\d+).*?(\d+).*?(\d+)\)/.exec("rgb("+e+","+t+","+n+")");return(255&r[1])+(255&r[2])+(255&r[3])<640?"text-white":"text-grey"},a.state={visible:e.show},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=u()("alert",this.props.className,this.isDark());return!!this.state.visible&&c.a.createElement("div",{className:e,style:{backgroundColor:this.props.bg},role:"alert"},this.props.children)}}]),t}(c.a.Component);t.a=d},742:function(e,t,a){"use strict";a.r(t);var n=a(354),r=a(69),s=a.n(r),i=a(23),l=a(24),o=a(26),c=a(25),m=a(27),u=a(58),d=a(0),h=a.n(d),p=a(718),v=a(472),g=a(48),b=a(59),f=(a(473),a(325)),E=a.n(f),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).rand=Math.floor(1e3*Math.random()+1),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onFieldChange",value:function(e){var t=e.target.name,a=e.target.checked;this.props.onChange(t,a)}},{key:"render",value:function(){var e=E()("form-check",this.props.className);return h.a.createElement("div",{className:e},h.a.createElement("input",{type:"checkbox",name:this.props.name,className:"form-check-input",id:this.props.name+"-"+this.rand,checked:this.props.checked,onChange:this.onFieldChange.bind(this)}),h.a.createElement("label",{className:"form-check-label text-left",htmlFor:this.props.name+"-"+this.rand},this.props.children))}}]),t}(h.a.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onFieldChange",value:function(e){var t=e.target.name,a=e.target.value;this.props.onChange(t,a)}},{key:"validate",value:function(){return this.props.validation?"valid":!1===this.props.validation?"invalid":void 0}},{key:"render",value:function(){var e=E()("form-control",this.props.className,this.validate());return h.a.createElement("input",{className:e,type:this.props.type,value:this.props.value,name:this.props.name,placeholder:this.props.placeholder,onChange:this.onFieldChange.bind(this)})}}]),t}(h.a.Component),y={DEFAULT:"",R:"btn-rounded"},k={DANGER:"btn-danger",SUCCESS:"btn-success",WARNING:"btn-warning",INFO:"btn-info",PRIMARY:"btn-primary",SECONDARY:"btn-secondary",WHITE:"btn-white",ELEGANT:"btn-elegant",oDANGER:"btn-outline-danger",oSUCCESS:"btn-outline-success",oWARNING:"btn-outline-warning",oINFO:"btn-outline-info",oPRIMARY:"btn-outline-primary",oSECONDARY:"btn-outline-secondary",oWHITE:"btn-outline-white",oELEGANT:"btn-outline-elegant"},w={SM:"btn-sm",MD:"btn-md",LG:"btn-lg",DEFAULT:""},C=E.a.bind(w),O=E.a.bind(k),T=E.a.bind(y),x=function(e){var t=e.btnstyle,a=e.btntype,n=e.size,r=e.href,s=e.children,i=e.className,l=e.disabled,o=e.onClick,c=E()("btn",O(t),T(a),C(n),{disabled:l},i);return d.createElement("a",{href:r,className:c,onClick:o},s)};x.defaultProps={size:w.DEFAULT,btnstyle:k.oWHITE,btntype:y.R,className:"",disabled:!1};var j=x,I=a(719),A=Object(I.a)(d,{useCssModules:!1}),_=a(361),D=a(38),R=a(30),F=a(37),M=a.n(F);function L(){var e=Object(u.a)(['\n    query modal($token: String!) {\n    page(token: $token, url: "/pharmaziegasse/registration") {\n        urlPath\n        ... on RegistrationRegistrationformPage {\n        registrationHead\n        registrationInfoText\n        registrationNewsletterText\n        registrationPrivacyText\n        registrationStepText\n        thankYouText\n        registrationButton {\n            buttonTitle\n            buttonPage {\n            id\n            urlPath\n            }\n        }\n        }\n    }\n    }\n']);return L=function(){return e},e}function H(){var e=Object(u.a)(['\n    mutation register($token: String!, $values: GenericScalar!) {\n        registrationRegistrationformPage(token: $token, url: "/pharmaziegasse/registration", values: $values) {\n            result\n            errors {\n            name\n            errors\n            }\n        }\n    }\n']);return H=function(){return e},e}var z=Object(b.a)(H()),P=Object(b.a)(L()),B=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(o.a)(this,Object(c.a)(t).call(this,e))).responseFacebook=function(e){void 0!==e.first_name&&null!==e.first_name&&r.setState({prenamelive:e.first_name}),void 0!==e.last_name&&null!==e.last_name&&r.setState({surnamelive:e.last_name}),void 0!==e.email&&null!==e.email&&r.setState({emaillive:e.email}),void 0!==e.picture&&null!==e.picture&&r.setState({picture:e.picture.data.url}),void 0!==e.accessToken&&null!==e.accessToken&&r.setState({verified:!0}),r.validateInput(),r.oAuthSuccess()},r.oAuthSuccess=function(){r.setState({oAuthed:!0}),r.setState({formHidden:!0})},r.sendData=function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.setItem("f_n",r.state.prename),localStorage.setItem("f_l",r.state.surname),localStorage.setItem("f_e",r.state.email),localStorage.setItem("f_p",r.state.phone),null===(e={title:"",first_name:r.state.prename,last_name:r.state.surname,email:r.state.email,telephone:r.state.phone,address:r.state.address,postal_code:r.state.postalcode,city:r.state.city,country:r.state.country,verified:r.state.verified,newsletter:r.state.newsletter})&&void 0===e){t.next=10;break}return t.next=8,s.a.awrap(r.props.register({variables:{token:r.props.token,values:e}}).then((function(e){"OK"===e.data.registrationRegistrationformPage.result?(r.setState({showError:!1}),r.setState({showSuccess:!0})):(r.setState({buffer:"Ihre Eingaben entspricht nicht den Vorraussetzungen. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben."}),r.setState({showError:!0}),r.setState({showSuccess:!1}))})).catch((function(e){"GraphQL error: {'telephone': ['A user with that phone number already exists.']}"===e.message?r.setState({buffer:"Die eingetragene Telefonnummer wurde bereits verwendet.",showError:!0,devError:e.message}):r.setState({buffer:"Es ist ein unerwarteter Fehler aufgetreten. Bitte versuchen Sie es etwas sp\xe4ter erneut.",showError:!0,devError:e.message}),console.error(e)})));case 8:t.next=13;break;case 10:r.setState({buffer:"Ihre Eingaben entspricht nicht den Vorraussetzungen. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben."}),r.setState({showError:!0}),r.setState({showSuccess:!1});case 13:case"end":return t.stop()}}))},r.validateInput=function(){r.checkTel(r.state.phonelive),r.checkEmail(r.state.emaillive),r.checkName("surname",r.state.surnamelive),r.checkName("prename",r.state.prenamelive)},r.handleSubmitForm=function(e){e.preventDefault();var t=[],a=[];if(void 0!==r.state.prename&&void 0!==r.state.surname||(a.push("Bitte geben Sie Ihren Namen ein."),t.push(4)),void 0===r.state.phone&&(a.push("Bitte geben Sie eine Telefonnummer ein."),t.push(1)),!1===r.state.phone&&(a.push("Die eingegebene Telefonnummer ist ung\xfcltig. Bitte geben Sie auch die L\xe4ndervorzahl (z.B. +43) an."),t.push(1)),void 0===r.state.email&&(a.push("Bitte geben Sie eine E-Mail Adresse ein."),t.push(3)),!1===r.state.email&&(a.push("Die eingegebene E-Mail Adresse ist ung\xfcltig."),t.push(3)),!1!==r.state.prename&&!1!==r.state.surname||(a.push("Ihr Name darf keine Sonderzeichen enthalten."),t.push(5)),!1===r.state.gdpr&&(a.push("Bitte beachten Sie die Datenschutzerkl\xe4rung."),t.push(6)),void 0!==t&&t.length>0)r.setState({buffer:a}),r.setState({showError:!0}),r.setState({showSuccess:!1});else{var n={name:r.state.prename+" "+r.state.surname,email:r.state.email,phone:r.state.phone};r.props.pixel.track("CompleteRegistration",n),r.sendData()}},r.handleChange=function(e,t){switch(e){case"phone":r.setState({phonelive:t},r.checkTel(t));break;case"email":r.setState({emaillive:t},r.checkEmail(t));break;case"prename":r.setState({prenamelive:t},r.checkName("prename",t));break;case"surname":r.setState({surnamelive:t},r.checkName("surname",t));break;case"newsletter":r.setState({newsletter:t});break;case"gdpr":r.setState({gdpr:t});break;default:r.setState(Object(n.a)({},e,t))}},r.checkTel=function(e){if(""!==e){var t=Object(p.a)(e);if(void 0!==t){if(t.formatInternational(),r.setState({phone:t.number}),void 0!==t.country){var n=a(479).getName;r.setState({country:n(t.country),cc:t.country.toLowerCase()})}}else r.setState({country:!1,cc:!1}),r.setState({phone:!1})}else r.setState({country:!1,cc:!1}),r.setState({phone:void 0})},r.checkEmail=function(e){""!==e?v.validate(e)?r.setState({email:e}):r.setState({email:!1}):r.setState({email:void 0})},r.checkName=function(e,t){""!==t.trim()?r.setState(Object(n.a)({},e,t)):r.setState(Object(n.a)({},e,void 0))},r.printFlag=function(){if(!1!==r.state.cc)return d.createElement(A,{code:r.state.cc})},r.printErrorDialogs=function(){if(Array.isArray(r.state.buffer)){var e=[],t=r.state.buffer;return Object.keys(t).forEach((function(a,n){e.push(d.createElement("p",{key:n},t[n]))})),e}return d.createElement("p",null,r.state.buffer)},r.printError=function(){return!!r.state.showError&&(null!==r.state.buffer||void 0!==r.state.buffer?d.createElement(_.a,{className:"alert-danger",show:"true"},r.printErrorDialogs()):d.createElement(_.a,{className:"alert-danger",show:"true"},"Unknown error."))},r.editForm=function(){r.setState({formHidden:!1})},r.state={phone:void 0,email:void 0,prename:void 0,surname:void 0,country:!1,picture:void 0,gdpr:!1,newsletter:!1,showError:!1,verified:!1,showSuccess:!1,oAuthed:!1,formHidden:!1,phonelive:"",emaillive:"",prenamelive:"",surnamelive:""},r}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderContent",value:function(){var e=this,t=this.props.data.page;return console.log(t),void 0!==this.props.data.page&&d.createElement("div",{className:"modal fade",id:"_pharmaziegasse_registration",tabIndex:"-1",role:"dialog","aria-labelledby":"Registrieren","aria-hidden":"true","data-backdrop":"true"},d.createElement("div",{className:"modal-dialog modal-lg modal-notify modal-info",role:"document"},d.createElement("div",{className:"modal-content"},d.createElement("div",{className:"modal-body"},d.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},d.createElement("span",{"aria-hidden":"true",className:"dark-text"},"\xd7")),d.createElement("div",{className:"lead font-weight-bold text-center",dangerouslySetInnerHTML:{__html:M()(Object(R.renderToString)(d.createElement(D.a,{value:t.registrationHead})))}}),d.createElement("hr",null),this.state.showSuccess?d.createElement("div",{className:"success"},d.createElement(_.a,{className:"alert-success",show:"true"},d.createElement("i",{className:"far fa-check-circle fa-3x green-text mt-1 mb-2"}),d.createElement("div",{dangerouslySetInnerHTML:{__html:M()(Object(R.renderToString)(d.createElement(D.a,{value:t.thankYouText})))}}))):d.createElement("div",{className:"register-form"},d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-7"},this.state.oAuthed?d.createElement("div",{className:"alert alert-success mb-4"},d.createElement("h4",{className:"font-weight-bold"},"Hallo ",this.state.prename,"!"),d.createElement("p",null,"Wir ben\xf6tigen jetzt nur noch Deine Telefonnummer.")):d.createElement("div",{class:"d-none"},d.createElement("div",{className:"oAuth"}),d.createElement("div",{className:"w-100"},d.createElement("div",{className:"splitter my-4"},d.createElement("span",{className:"or"},d.createElement("span",{className:"or-text"},"oder"))))),this.printError(),"dev"===window.location.search.substr(1)&&this.state.devError&&d.createElement(_.a,{className:"alert-warning",show:"true"},this.state.devError),d.createElement("form",{id:"form-reg",onSubmit:function(t){e.handleSubmitForm(t),t.preventDefault()}},d.createElement("div",null,d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"far fa-user-circle"}),d.createElement(S,{className:"my-3",type:"text",name:"prename",placeholder:"Vorname*",value:this.state.prenamelive,validation:this.state.valid3,onChange:this.handleChange.bind(this)})),d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"far fa-user-circle"}),d.createElement(S,{className:"my-3",type:"text",name:"surname",placeholder:"Nachname*",value:this.state.surnamelive,validation:this.state.valid4,onChange:this.handleChange.bind(this)}))),d.createElement("div",{className:"input-grp"},this.printFlag(),d.createElement("i",{className:"fas fa-phone"}),d.createElement(S,{className:"my-3",type:"text",name:"phone",placeholder:"Telefonnummer*",value:this.state.phonelive,validation:this.state.valid1,onChange:this.handleChange.bind(this)})),this.state.formHidden?d.createElement("div",{className:"alert alert-info register-info alert-data"},d.createElement("p",{className:"m-0"},d.createElement("span",{className:"font-weight-bold"},"Meine Daten"),d.createElement("br",null),"Name: ",this.state.prename," ",this.state.surname,d.createElement("br",null),"E-Mail: ",this.state.email,d.createElement("br",null),d.createElement(j,{btnstyle:"oELEGANT",size:"SM",onClick:this.editForm},"\xc4ndern"))):d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"far fa-envelope"}),d.createElement(S,{className:"my-3",type:"email",name:"email",placeholder:"E-Mail Adresse*",value:this.state.emaillive,validation:this.state.valid2,onChange:this.handleChange.bind(this)}))),d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-4"},d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"fas fa-globe"}),d.createElement(S,{className:"my-3",type:"text",name:"postalcode",placeholder:"PLZ",value:this.state.postalcode,validation:this.state.valid5,onChange:this.handleChange.bind(this)}))),d.createElement("div",{className:"col-md-8"},d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"fas fa-city"}),d.createElement(S,{className:"my-3",type:"text",name:"city",placeholder:"Stadt",value:this.state.city,validation:this.state.valid6,onChange:this.handleChange.bind(this)}))),d.createElement("div",{className:"col-md-12"},d.createElement("div",{className:"input-grp"},d.createElement("i",{className:"far fa-building"}),d.createElement(S,{className:"mb-2",type:"text",name:"address",placeholder:"Adresse",value:this.state.address,validation:this.state.valid7,onChange:this.handleChange.bind(this)})))),d.createElement("span",{className:"text-muted"},"* = Pflichtfeld")),d.createElement("div",{className:"text-left mb-3"},d.createElement(N,{name:"newsletter",className:"my-4",onChange:this.handleChange.bind(this)},d.createElement("div",{dangerouslySetInnerHTML:{__html:M()(Object(R.renderToString)(d.createElement(D.a,{value:t.registrationNewsletterText})))}})),d.createElement(N,{name:"gdpr",validation:this.state.valid6,onChange:this.handleChange.bind(this)},d.createElement("div",{dangerouslySetInnerHTML:{__html:M()(Object(R.renderToString)(d.createElement(D.a,{value:t.registrationPrivacyText})))}}))),d.createElement("input",{className:"btn btn-outline-elegant font-weight-bold",type:"submit",value:"Kostenloses Beratungsgespr\xe4ch anfordern"}))),d.createElement("div",{className:"col-md-5 text-left"},d.createElement(_.a,{className:"alert-info register-info",show:"true"},d.createElement("i",{className:"far fa-lightbulb fa-2x"}),d.createElement("div",{className:"mt-2 dark-grey-text",dangerouslySetInnerHTML:{__html:M()(Object(R.renderToString)(d.createElement(D.a,{value:t.registrationInfoText})))}})))))))))}},{key:"render",value:function(){return console.log(this.state),console.log(this.props.data),void 0!==this.props.data&&this.renderContent()}}]),t}(d.Component);t.default=Object(g.d)(Object(g.e)(z,{name:"register"}),Object(g.e)(P,{options:function(e){return{variables:{token:e.token}}}}))(B)}}]);
//# sourceMappingURL=17.e522b9e6.chunk.js.map