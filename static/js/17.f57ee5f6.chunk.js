(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{362:function(e,t,a){"use strict";var n=a(23),r=a(24),s=a(26),i=a(25),l=a(27),o=a(0),c=a.n(o),m=a(326),d=a.n(m),u=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},a.isDark=function(){if(null===a.props.bg||void 0===a.props.bg)return null;var e=a.hexToRgb(a.props.bg).r,t=a.hexToRgb(a.props.bg).g,n=a.hexToRgb(a.props.bg).b,r=/rgb\((\d+).*?(\d+).*?(\d+)\)/.exec("rgb("+e+","+t+","+n+")");return(255&r[1])+(255&r[2])+(255&r[3])<640?"text-white":"text-grey"},a.state={visible:e.show},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=d()("alert",this.props.className,this.isDark());return!!this.state.visible&&c.a.createElement("div",{className:e,style:{backgroundColor:this.props.bg},role:"alert"},this.props.children)}}]),t}(c.a.Component);t.a=u},743:function(e,t,a){"use strict";a.r(t);var n=a(355),r=a(69),s=a.n(r),i=a(88),l=a(23),o=a(24),c=a(26),m=a(25),d=a(27),u=a(58),h=a(0),p=a.n(h),v=a(719),b=a(473),g=a(48),f=a(59),E=(a(474),a(326)),N=a.n(E),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).rand=Math.floor(1e3*Math.random()+1),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onFieldChange",value:function(e){var t=e.target.name,a=e.target.checked;this.props.onChange(t,a)}},{key:"render",value:function(){var e=N()("form-check",this.props.className);return p.a.createElement("div",{className:e},p.a.createElement("input",{type:"checkbox",name:this.props.name,className:"form-check-input",id:this.props.name+"-"+this.rand,checked:this.props.checked,onChange:this.onFieldChange.bind(this)}),p.a.createElement("label",{className:"form-check-label text-left",htmlFor:this.props.name+"-"+this.rand},this.props.children))}}]),t}(p.a.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onFieldChange",value:function(e){var t=e.target.name,a=e.target.value;this.props.onChange(t,a)}},{key:"validate",value:function(){return this.props.validation?"valid":!1===this.props.validation?"invalid":void 0}},{key:"render",value:function(){var e=N()("form-control",this.props.className,this.validate());return p.a.createElement("input",{className:e,type:this.props.type,value:this.props.value,name:this.props.name,placeholder:this.props.placeholder,onChange:this.onFieldChange.bind(this)})}}]),t}(p.a.Component),k={DEFAULT:"",R:"btn-rounded"},w={DANGER:"btn-danger",SUCCESS:"btn-success",WARNING:"btn-warning",INFO:"btn-info",PRIMARY:"btn-primary",SECONDARY:"btn-secondary",WHITE:"btn-white",ELEGANT:"btn-elegant",oDANGER:"btn-outline-danger",oSUCCESS:"btn-outline-success",oWARNING:"btn-outline-warning",oINFO:"btn-outline-info",oPRIMARY:"btn-outline-primary",oSECONDARY:"btn-outline-secondary",oWHITE:"btn-outline-white",oELEGANT:"btn-outline-elegant"},C={SM:"btn-sm",MD:"btn-md",LG:"btn-lg",DEFAULT:""},O=N.a.bind(C),T=N.a.bind(w),x=N.a.bind(k),j=function(e){var t=e.btnstyle,a=e.btntype,n=e.size,r=e.href,s=e.children,i=e.className,l=e.disabled,o=e.onClick,c=N()("btn",T(t),x(a),O(n),{disabled:l},i);return h.createElement("a",{href:r,className:c,onClick:o},s)};j.defaultProps={size:C.DEFAULT,btnstyle:w.oWHITE,btntype:k.R,className:"",disabled:!1};var I=j,A=a(720),_=Object(A.a)(h,{useCssModules:!1}),R=a(362),D=a(38),F=a(30),M=a(37),H=a.n(M);function L(){var e=Object(u.a)(['\n    query modal($token: String!) {\n    page(token: $token, url: "/pharmaziegasse/registration") {\n        urlPath\n        ... on RegistrationRegistrationformPage {\n        registrationHead\n        registrationInfoText\n        registrationNewsletterText\n        registrationPrivacyText\n        registrationStepText\n        thankYouText\n        registrationButton {\n            buttonTitle\n            buttonPage {\n            id\n            urlPath\n            }\n        }\n        }\n    }\n    }\n']);return L=function(){return e},e}function P(){var e=Object(u.a)(['\n    mutation register($token: String!, $values: GenericScalar!) {\n        registrationRegistrationformPage(token: $token, url: "/pharmaziegasse/registration", values: $values) {\n            result\n            errors {\n            name\n            errors\n            }\n        }\n    }\n']);return P=function(){return e},e}var z=Object(f.a)(P()),B=Object(f.a)(L()),G=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(c.a)(this,Object(m.a)(t).call(this,e))).responseFacebook=function(e){void 0!==e.first_name&&null!==e.first_name&&r.setState({prenamelive:e.first_name}),void 0!==e.last_name&&null!==e.last_name&&r.setState({surnamelive:e.last_name}),void 0!==e.email&&null!==e.email&&r.setState({emaillive:e.email}),void 0!==e.picture&&null!==e.picture&&r.setState({picture:e.picture.data.url}),void 0!==e.accessToken&&null!==e.accessToken&&r.setState({verified:!0}),r.validateInput(),r.oAuthSuccess()},r.oAuthSuccess=function(){r.setState({oAuthed:!0}),r.setState({formHidden:!0})},r.sendData=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.setItem("f_n",r.state.prename),localStorage.setItem("f_l",r.state.surname),localStorage.setItem("f_e",r.state.email),localStorage.setItem("f_p",r.state.phone),null===(t={title:"",first_name:r.state.prename,last_name:r.state.surname,email:r.state.email,telephone:r.state.phone,address:r.state.address,postal_code:r.state.postalcode,city:r.state.city,country:r.state.country,verified:r.state.verified,newsletter:r.state.newsletter})&&void 0===t){e.next=10;break}return e.next=8,r.props.register({variables:{token:r.props.token,values:t}}).then(function(e){"OK"===e.data.registrationRegistrationformPage.result?(r.setState({showError:!1}),r.setState({showSuccess:!0})):(r.setState({buffer:"Ihre Eingaben entspricht nicht den Vorraussetzungen. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben."}),r.setState({showError:!0}),r.setState({showSuccess:!1}))}).catch(function(e){r.setState({buffer:"Es ist ein unerwarteter Fehler aufgetreten. Bitte versuchen Sie es etwas sp\xe4ter erneut."}),r.setState({showError:!0}),r.setState({showSuccess:!1}),console.error("Mutation error:"),console.log(e)});case 8:e.next=13;break;case 10:r.setState({buffer:"Ihre Eingaben entspricht nicht den Vorraussetzungen. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben."}),r.setState({showError:!0}),r.setState({showSuccess:!1});case 13:case"end":return e.stop()}},e)})),r.validateInput=function(){r.checkTel(r.state.phonelive),r.checkEmail(r.state.emaillive),r.checkName("surname",r.state.surnamelive),r.checkName("prename",r.state.prenamelive)},r.handleSubmitForm=function(e){e.preventDefault();var t=[],a=[];if(void 0!==r.state.prename&&void 0!==r.state.surname||(a.push("Bitte geben Sie Ihren Namen ein."),t.push(4)),void 0===r.state.phone&&(a.push("Bitte geben Sie eine Telefonnummer ein."),t.push(1)),!1===r.state.phone&&(a.push("Die eingegebene Telefonnummer ist ung\xfcltig. Bitte geben Sie auch die L\xe4ndervorzahl (z.B. +43) an."),t.push(1)),void 0===r.state.email&&(a.push("Bitte geben Sie eine E-Mail Adresse ein."),t.push(3)),!1===r.state.email&&(a.push("Die eingegebene E-Mail Adresse ist ung\xfcltig."),t.push(3)),!1!==r.state.prename&&!1!==r.state.surname||(a.push("Ihr Name darf keine Sonderzeichen enthalten."),t.push(5)),!1===r.state.gdpr&&(a.push("Bitte beachten Sie die Datenschutzerkl\xe4rung."),t.push(6)),void 0!==t&&t.length>0)r.setState({buffer:a}),r.setState({showError:!0}),r.setState({showSuccess:!1});else{var n={name:r.state.prename+" "+r.state.surname,email:r.state.email,phone:r.state.phone};r.props.pixel.track("CompleteRegistration",n),r.sendData()}},r.handleChange=function(e,t){switch(e){case"phone":r.setState({phonelive:t},r.checkTel(t));break;case"email":r.setState({emaillive:t},r.checkEmail(t));break;case"prename":r.setState({prenamelive:t},r.checkName("prename",t));break;case"surname":r.setState({surnamelive:t},r.checkName("surname",t));break;case"newsletter":r.setState({newsletter:t});break;case"gdpr":r.setState({gdpr:t});break;default:r.setState(Object(n.a)({},e,t))}},r.checkTel=function(e){if(""!==e){var t=Object(v.a)(e);if(void 0!==t){if(t.formatInternational(),r.setState({phone:t.number}),void 0!==t.country){var n=a(480).getName;r.setState({country:n(t.country),cc:t.country.toLowerCase()})}}else r.setState({country:!1,cc:!1}),r.setState({phone:!1})}else r.setState({country:!1,cc:!1}),r.setState({phone:void 0})},r.checkEmail=function(e){""!==e?b.validate(e)?r.setState({email:e}):r.setState({email:!1}):r.setState({email:void 0})},r.checkName=function(e,t){""!==t.trim()?r.setState(Object(n.a)({},e,t)):r.setState(Object(n.a)({},e,void 0))},r.printFlag=function(){if(!1!==r.state.cc)return h.createElement(_,{code:r.state.cc})},r.printErrorDialogs=function(){if(Array.isArray(r.state.buffer)){var e=[],t=r.state.buffer;return Object.keys(t).forEach(function(a,n){e.push(h.createElement("p",{key:n},t[n]))}),e}return h.createElement("p",null,r.state.buffer)},r.printError=function(){return!!r.state.showError&&(null!==r.state.buffer||void 0!==r.state.buffer?h.createElement(R.a,{className:"alert-danger",show:"true"},r.printErrorDialogs()):h.createElement(R.a,{className:"alert-danger",show:"true"},"Unknown error."))},r.editForm=function(){r.setState({formHidden:!1})},r.state={phone:void 0,email:void 0,prename:void 0,surname:void 0,country:!1,picture:void 0,gdpr:!1,newsletter:!1,showError:!1,verified:!1,showSuccess:!1,oAuthed:!1,formHidden:!1,phonelive:"",emaillive:"",prenamelive:"",surnamelive:""},r}return Object(d.a)(t,e),Object(o.a)(t,[{key:"renderContent",value:function(){var e=this;console.log(this.props.data);var t=this.props.data.page;return console.log(t),void 0!==this.props.data.page&&h.createElement("div",{className:"modal fade",id:"registration",tabIndex:"-1",role:"dialog","aria-labelledby":"Registrieren","aria-hidden":"true","data-backdrop":"true"},h.createElement("div",{className:"modal-dialog modal-lg modal-notify modal-info",role:"document"},h.createElement("div",{className:"modal-content"},h.createElement("div",{className:"modal-body"},h.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},h.createElement("span",{"aria-hidden":"true",className:"dark-text"},"\xd7")),h.createElement("div",{className:"lead font-weight-bold text-center",dangerouslySetInnerHTML:{__html:H()(Object(F.renderToString)(h.createElement(D.a,{value:t.registrationHead})))}}),h.createElement("hr",null),this.state.showSuccess?h.createElement("div",{className:"success"},h.createElement(R.a,{className:"alert-success",show:"true"},h.createElement("i",{className:"far fa-check-circle fa-3x green-text mt-1 mb-2"}),h.createElement("div",{dangerouslySetInnerHTML:{__html:H()(Object(F.renderToString)(h.createElement(D.a,{value:t.thankYouText})))}}))):h.createElement("div",{className:"register-form"},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-md-7"},this.state.oAuthed?h.createElement("div",{className:"alert alert-success mb-4"},h.createElement("h4",{className:"font-weight-bold"},"Hallo ",this.state.prename,"!"),h.createElement("p",null,"Wir ben\xf6tigen jetzt nur noch Deine Telefonnummer.")):h.createElement("div",{class:"d-none"},h.createElement("div",{className:"oAuth"}),h.createElement("div",{className:"w-100"},h.createElement("div",{className:"splitter my-4"},h.createElement("span",{className:"or"},h.createElement("span",{className:"or-text"},"oder"))))),this.printError(),h.createElement("form",{id:"form-reg",onSubmit:function(t){e.handleSubmitForm(t),t.preventDefault()}},h.createElement("div",null,h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"far fa-user-circle"}),h.createElement(y,{className:"my-3",type:"text",name:"prename",placeholder:"Vorname*",value:this.state.prenamelive,validation:this.state.valid3,onChange:this.handleChange.bind(this)})),h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"far fa-user-circle"}),h.createElement(y,{className:"my-3",type:"text",name:"surname",placeholder:"Nachname*",value:this.state.surnamelive,validation:this.state.valid4,onChange:this.handleChange.bind(this)}))),h.createElement("div",{className:"input-grp"},this.printFlag(),h.createElement("i",{className:"fas fa-phone"}),h.createElement(y,{className:"my-3",type:"text",name:"phone",placeholder:"Telefonnummer*",value:this.state.phonelive,validation:this.state.valid1,onChange:this.handleChange.bind(this)})),this.state.formHidden?h.createElement("div",{className:"alert alert-info register-info alert-data"},h.createElement("p",{className:"m-0"},h.createElement("span",{className:"font-weight-bold"},"Meine Daten"),h.createElement("br",null),"Name: ",this.state.prename," ",this.state.surname,h.createElement("br",null),"E-Mail: ",this.state.email,h.createElement("br",null),h.createElement(I,{btnstyle:"oELEGANT",size:"SM",onClick:this.editForm},"\xc4ndern"))):h.createElement(h.Fragment,null,h.createElement("div",null,h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"far fa-envelope"}),h.createElement(y,{className:"my-3",type:"email",name:"email",placeholder:"E-Mail Adresse*",value:this.state.emaillive,validation:this.state.valid2,onChange:this.handleChange.bind(this)}))),h.createElement("div",{className:"row"},h.createElement("div",{className:"col-md-4"},h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"fas fa-globe"}),h.createElement(y,{className:"my-3",type:"text",name:"postalcode",placeholder:"PLZ",value:this.state.postalcode,validation:this.state.valid5,onChange:this.handleChange.bind(this)}))),h.createElement("div",{className:"col-md-8"},h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"fas fa-city"}),h.createElement(y,{className:"my-3",type:"text",name:"city",placeholder:"Stadt",value:this.state.city,validation:this.state.valid6,onChange:this.handleChange.bind(this)}))),h.createElement("div",{className:"col-md-12"},h.createElement("div",{className:"input-grp"},h.createElement("i",{className:"far fa-building"}),h.createElement(y,{className:"mb-2",type:"text",name:"address",placeholder:"Adresse",value:this.state.address,validation:this.state.valid7,onChange:this.handleChange.bind(this)})))),h.createElement("span",{className:"text-muted"},"* = Pflichtfeld")),h.createElement("div",{className:"text-left mb-3"},h.createElement(S,{name:"newsletter",className:"my-4",onChange:this.handleChange.bind(this)},h.createElement("div",{dangerouslySetInnerHTML:{__html:H()(Object(F.renderToString)(h.createElement(D.a,{value:t.registrationNewsletterText})))}})),h.createElement(S,{name:"gdpr",validation:this.state.valid6,onChange:this.handleChange.bind(this)},h.createElement("div",{dangerouslySetInnerHTML:{__html:H()(Object(F.renderToString)(h.createElement(D.a,{value:t.registrationPrivacyText})))}}))),h.createElement("input",{className:"btn btn-outline-elegant font-weight-bold",type:"submit",value:"Kostenloses Beratungsgespr\xe4ch anfordern"}))),h.createElement("div",{className:"col-md-5 text-left"},h.createElement(R.a,{className:"alert-info register-info",show:"true"},h.createElement("i",{className:"far fa-lightbulb fa-2x"}),h.createElement("div",{className:"mt-2 dark-grey-text",dangerouslySetInnerHTML:{__html:H()(Object(F.renderToString)(h.createElement(D.a,{value:t.registrationInfoText})))}})))))))))}},{key:"render",value:function(){return console.log(this.state),console.log(this.props.data),void 0!==this.props.data&&this.renderContent()}}]),t}(h.Component);t.default=Object(g.d)(Object(g.e)(z,{name:"register"}),Object(g.e)(B,{options:function(e){return{variables:{token:e.token}}}}))(G)}}]);
//# sourceMappingURL=17.f57ee5f6.chunk.js.map